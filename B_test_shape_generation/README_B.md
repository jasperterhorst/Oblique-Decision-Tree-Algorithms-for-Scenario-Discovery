# B - Test Shape Generation

This module provides tools for generating **synthetic 2D and 3D geometric datasets** with controllable shape parameters and label noise. These datasets are used in the modules [C_oblique_decision_tree_benchmark](../C_oblique_decision_tree_benchmark) and [D_visual_comparisons_sd_vs_oblique](../D_visual_comparisons_sd_vs_oblique) for benchmarking oblique decision tree algorithms and established scenario discovery algorithms.

**Author**: Jasper ter Horst

---

## Overview

This module provides tools to generate and export synthetic classification datasets using geometric shapes in **2D or 3D** space.

It includes a range of configurable shapes:
- **2D**: rectangle, radial segment, barbell, sine wave, star
- **3D**: radial segment, barbell, saddle surface

All shapes support:
- **Geometric parameter tuning** (e.g. size, curvature)
- **Optional rotation** within the unit square or cube
- **Boundary-based label noise**, where class labels flip based on proximity to the shape’s edge

Datasets are generated by sampling from the unit square (2D) or cube (3D) using **Latin Hypercube Sampling (LHS)**. Each point is labeled based on whether it falls inside or outside the selected shape, with optional noise. Additional irrelevant dimensions can be appended to simulate high-dimensional input spaces.

The system can be used interactively via a Jupyter notebook, or programmatically through a .py script for large-scale dataset generation.


---

## Getting Started

### 1. Interactive Shape Interface

Open [interactive_shape_tool.ipynb](./interactive_shape_tool.ipynb) to manually experiment with shape parameters and generate labeled visualizations interactively.

```bash
jupyter notebook B_interactive_shape_tool.ipynb
```

### 2. Batch Shape Generator

Run [run_test_shape_generation.py](./run_test_shape_generation.py) to generate all shapes automatically across label noise levels:

```bash
python run_test_shape_generation.py
```

This creates structured folders in [`../_data/shapes/`](../_data/shapes/) with `.csv` and `.pdf` files per shape and noise level used.

### 3. Dimensional Noise & Sample Size Variation

Run [set_noise_dimensionality_and_sample_size.py](./noise_dimensionality_and_sample_size/set_noise_dimensionality_and_sample_size.py) to create shape dataset variants with additional noise dimensions or reduced sample sizes.

```bash
python noise_dimensionality_and_sample_size/set_noise_dimensionality_and_sample_size.py
```

This creates structured folders such as:

- [`../_data/shapes_noise_dimensionality_tests/label_noise_003/radial_segment_3d/`](../_data/shapes_noise_dimensionality_tests/label_noise_003/radial_segment_3d/)
- [`../_data/shapes_sample_size_tests/label_noise_003/radial_segment_3d/`](../_data/shapes_sample_size_tests/label_noise_003/radial_segment_3d/)

Each folder contains:
- `*_x.csv`: feature data, including any added noise dimensions
- `*_y.csv`: corresponding labels
- Filenames include metadata such as sample count and total dimensionality, e.g.:  
  `radial_segment_3d_label_noise_003_10000_samples_dim_09_x.csv`


---

## Project Structure

```text
B_test_shape_generation/
│
├── shape_generators.py                                 # Functions for generating labeled 2D/3D shapes
├── run_test_shape_generation.py                        # Script for batch generation across shape/noise configurations
├── interfaces_ui.py                                    # ipywidgets layout and event handling for the notebook
├── interactive_shape_tool.ipynb                        # Interactive notebook for manual shape generation
├── utils.py                                            # Helpers for saving figures, formatting notes, and annotations
├── __init__.py
│
└── noise_dimensionality_and_sample_size/
    ├── __init__.py
    ├── helpers_dataset_conversion.py                   # Converts and downsamples datasets, appends noise dims
    └── set_noise_dimensionality_and_sample_size.py     # Script to generate dataset variants with more noise/features
```

---

## Output Folder Structure

Generated datasets and visualizations are saved under structured folders inside the `_data/` directory. The folder structure and contents differ slightly depending on the generation mode:

### Standard Shape Generation

Output is saved under:

    _data/
    ├── shapes/
    │   ├── label_noise_003/
    │   │   ├── rectangle_2d_label_noise_003/
    │   │   │   ├── rectangle_2d_label_noise_003_xy_combined.csv
    │   │   │   ├── rectangle_2d_label_noise_003_x.csv
    │   │   │   ├── rectangle_2d_label_noise_003_y.csv
    │   │   │   ├── rectangle_2d_label_noise_003_plot.pdf
    │   │   │   └── rectangle_2d_label_noise_003_note.pdf

---

### Sample Size Variation

Output is saved under:

    _data/
    ├── shapes_sample_size_tests/
    │   └── label_noise_003/
    │       └── radial_segment_3d/
    │           ├── *_x.csv     # Sample data
    │           ├── *_y.csv     # Corresponding labels
    │           ├── *_x.csv     # Sample data
    │           └── *_y.csv     # Corresponding labels

---

### Noise Dimensionality Variation

Output is saved under:

    _data/
    ├── shapes_noise_dimensionality_tests/
    │   └── label_noise_003/
    │       └── radial_segment_3d/
    │           ├── *_x.csv     # Sample data with added noise dimensions
    │           ├── *_y.csv     # Corresponding labels
    │           ├── *_x.csv     # Sample data with added noise dimensions
    │           └── *_y.csv     # Corresponding labels

These outputs support downstream use in benchmarking and visualization workflows, while maintaining traceability through consistent file and folder naming.

---